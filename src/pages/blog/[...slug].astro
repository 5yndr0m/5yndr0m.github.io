---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import Layout from "../../layouts/Layout.astro";
import "../../styles/global.css";

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post) => ({
        params: { slug: post.slug },
        props: { post },
    }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title}>
    <main class="pt-32 pb-20">
        <article class="max-w-3xl mx-auto px-6">
            <header class="mb-12">
                <h1 class="text-4xl font-bold mb-4">{post.data.title}</h1>
                <p class="text-gray-500 font-mono text-sm">
                    {post.data.pubDate.toDateString()} | {post.data.category}
                </p>
            </header>

            {
                post.data.heroImage && (
                    <Image
                        src={post.data.heroImage}
                        alt={post.data.title}
                        width={1200}
                        height={600}
                        class="rounded-3xl mb-12 border border-gray-200 dark:border-gray-800"
                    />
                )
            }

            <div class="prose prose-lime dark:prose-invert max-w-none">
                <Content />
            </div>
        </article>
    </main>
</Layout>
