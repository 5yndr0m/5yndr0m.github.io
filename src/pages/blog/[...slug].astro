---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post) => ({
        params: { slug: post.slug },
        props: { post },
    }));
}

// 2. Get the post data from props
const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title}>
    <article class="max-w-3xl mx-auto px-6 pt-32 prose dark:prose-invert">
        <img src={post.data.heroImage} alt="" class="rounded-3xl mb-8" />
        <Content />
    </article>
</Layout>
