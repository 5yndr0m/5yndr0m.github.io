---
import Layout from "../../layouts/Layout.astro";
import { getCollection, render } from 'astro:content';
import { ArrowLeft, Calendar, Clock } from "lucide-react";

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map(post => ({
    params: { slug: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await render(post);
const { title, date, excerpt, tags, coverImage } = post.data;
---

<Layout title={`${title} | Syndrom`}>
    <article class="max-w-4xl mx-auto px-4 py-12 sm:px-6 lg:px-8">
        <a href="/#blog" class="inline-flex items-center text-slate-400 hover:text-mainPurple mb-8 transition-colors group">
            <ArrowLeft className="w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform" />
            Back to Feed
        </a>

        <header class="mb-12 text-center">
            <div class="flex flex-wrap items-center justify-center gap-2 mb-6 text-sm">
                {tags.map(tag => (
                    <span class="bg-mainPurple/20 text-mainLavender px-3 py-1 rounded-full font-medium border border-mainPurple/20 uppercase text-[10px] tracking-widest">{tag}</span>
                ))}
                <span class="text-white/20">â€¢</span>
                <span class="text-slate-500 flex items-center"><Calendar className="w-4 h-4 mr-1 text-mainPurple" /> {date}</span>
            </div>

            <h1 class="text-3xl md:text-6xl font-extrabold text-white mb-8 tracking-tight leading-tight">
                {title.split(' ').map((word, i) => (
                    i === title.split(' ').length - 2 || i === title.split(' ').length - 1 ? 
                    <span class="text-mainPurple">{word} </span> : word + " "
                ))}
            </h1>

            {coverImage ? (
                <div class="relative w-full aspect-[16/10] rounded-3xl overflow-hidden shadow-[0_0_50px_rgba(147,51,234,0.1)] border border-white/5 mb-12 bg-surface">
                    <img src={coverImage} alt={title} class="object-cover w-full h-full" />
                </div>
            ) : (
                <div class="relative w-full aspect-[16/10] rounded-3xl overflow-hidden shadow-[0_0_50px_rgba(147,51,234,0.1)] border border-white/5 mb-12 bg-surface flex items-center justify-center">
                    <span class="text-white/5 text-4xl font-black italic tracking-tighter uppercase">./blog_log</span>
                </div>
            )}
        </header>

        <div class="prose prose-lg prose-invert max-w-none prose-headings:text-mainLavender prose-a:text-mainPurple hover:prose-a:text-mainGreen prose-strong:text-mainGreen prose-code:text-mainGreen prose-code:bg-muted prose-code:px-1 prose-code:rounded prose-pre:bg-muted prose-pre:border prose-pre:border-white/5">
            <Content />
        </div>
    </article>
</Layout>
